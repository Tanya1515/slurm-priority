#Configuration file for slurm
#Authentification
AuthType=auth/munge
#JWT autentification for slurmrestd

#The accounting storage mechanism type.
AccountingStorageType= accounting_storage/slurmdbd

#The name of the machine hosting the accounting storage database.
AccountingStorageHost= slurm-laznik-storage

#The name by which this Slurm managed cluster is known in the accounting database. 
ClusterName= slurm-laznik

#Hostname of the machine where Slurm control daemon is executed
ControlMachine= slurm-laznik-master

SlurmctldDebug=debug5


#Identifies the type of resource selection algorithm to be used.
#select/cons_tres - the resources (cores, memory, GPUs and all other trackable resources) within a node are individually allocated as consumable resources. 
SelectType = select/cons_tres

#Parameters for SelectType
SelectTypeParameters= CR_CPU_Memory

SlurmdDebug=debug5

#The job accounting mechanism type. 
JobAcctGatherType= jobacct_gather/linux

#If set to "ALL" then jobs which exceed a partition's size and/or time limits will be rejected at submission time. 
#If job is submitted to multiple partitions, the job must satisfy the limits on all the requested partitions.
EnforcePartLimits= ALL

#Identifies the plugin to be used for process tracking on a job step basis. 
#proctrack/cgroup. Uses linux cgroups to constrain and track processes, and is the default for systems with cgroup support. 
ProctrackType= proctrack/cgroup

PreemptMode=REQUEUE

PreemptType=preempt/partition_prio

PriorityType = priority/multifactor

PriorityCalcPeriod = 2

PriorityFavorSmall = YES

PriorityMaxAge = 5

PriorityWeightAge = 10

PriorityWeightAssoc = 0

PriorityWeightFairShare = 0

PriorityWeightJobSize = 100

PriorityWeightPartition = 5

PriorityFlags=SMALL_RELATIVE_TO_TIME

#Controls when a DOWN node will be returned to service. 
# 1  means,  DOWN node will become available for use upon registration with a valid configuration only if it was set DOWN due to being non-responsive. 
#For any other reason, its state will not automatically be changed. 
ReturnToService= 1

#Identifies the type of scheduler to be used.
#For a backfill scheduling module to augment the default FIFO scheduling. 
#Backfill scheduling will initiate lower-priority jobs if doing so does not delay the expected initiation time of any higher priority job.
SchedulerType= sched/backfill

#Default real memory size available per allocated CPU in megabytes. Parameter iss used, when SelectType = select/cons_res or select/cons_tres 
#and consumable resources include memory and CPUs/cores
DefMemPerCPU= 500

#Pathname of a file into which the slurmctld daemon's logs are written.
SlurmctldLogFile= /var/log/slurm/slurmctld.log

#Pathname of a file into which the slurmctld daemon may write its process id. 
SlurmctldPidFile= /var/run/slurm/slurmctld.pid

#Pathname of a file into which the slurmd daemon's logs are written. 
SlurmdLogFile= /var/log/slurm/slurmd.log

#Pathname of a file into which the slurmd daemon may write its process id. 
SlurmdPidFile= /var/run/slurm/slurmd.pid

#Pathname of a directory into which the slurmd daemon's state information 
#and batch job script information are written.
SlurmdSpoolDir= /var/spool/slurmd

#Pathname of a directory into which the Slurm controller, slurmctld, saves its state.
#Slurm state will be saved here to recover from system failures.
StateSaveLocation= /var/spool/slurmctld

#Optional parameters for the task plugin. 
TaskPluginParam= None 

#Nodes 
#CPUs - number of logical processors on the node.
#RealMemory - size of real memory on the node in megabytes. Parameter is going to be set, if memory is consumable resource.

    
     NodeName = slurm-laznik-slave-1 CPUs=2 RealMemory=1500 
    
     NodeName = slurm-laznik-slave-2 CPUs=2 RealMemory=1500
    
     NodeName = slurm-laznik-slave-3 CPUs=2 RealMemory=1500
    
     NodeName = slurm-laznik-slave-4 CPUs=2 RealMemory=1500
    
     NodeName = slurm-laznik-slave-5 CPUs=2 RealMemory=1500
    
#Partition
       
     
       PartitionName=main Nodes  =  slurm-laznik-slave-[1-5]  Default=YES PriorityJobFactor=10 PriorityTier=1

       PartitionName=research Nodes = slurm-laznik-slave-[2-5] PriorityJobFactor=20 PriorityTier=1

       PartitionName=arut Nodes = slurm-laznik-slave-5 PriorityJobFactor=50 PriorityTier=10 RootOnly=YES
     



